!function(o,t){"use strict";var i,n,e,a=t(o),c=function(){function o(){this.outerBorder=8,this.minLeft=10,this.minTop=60,this.fadeSpeed=300,this.speed=400,this.nextClick=!0,this.textShow=!0,this.tpl={main:'<div class="cobox"><div class="cobox-main"><div class="cobox-outer"><div class="cobox-inner"><img class="cobox-image" src /><div class="cobox-loading"></div></div></div></div><div class="cobox-layer"></div></div>',nav:'<a href="#" class="cobox-nav cobox-prev"></a><a href="#" class="cobox-nav cobox-next"></a>'}}return o}(),r=function(){function o(o){this.options=o,this.init()}return o.prototype={constructor:o,init:function(){this.build()},build:function(){function o(o){return"string"===t.type(o)&&o.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)}function a(i){var n=i.map(function(i,n){return o(t(n).attr("href"))?(c(t(n)),n):void 0});return n}function c(o){e.push({link:o.attr("href"),title:o.attr("data-title")||o.attr("title")})}i=t("body"),e=[];var r=t("img").parent("a");n=a(r),this.start()},start:function(){var o=this;n.on("click",function(){var t=n.index(this);i.append(o.options.tpl.main);var e=i.find(".cobox-main"),a=i.find(".cobox-outer").height();return e.css({top:o.getTop(a)+"px"}),o.options.nextClick&&o.nav(t),o.cancel(),o.loadImage(t),!1})},loadImage:function(o){var t=this,n=e[o].link,c=e[o].title,r=e.length,s=this.options.speed,d=a.width(),f=a.height(),h=i.find(".cobox-prev"),l=i.find(".cobox-next"),u=i.find(".cobox-main"),p=i.find(".cobox-outer");i.find(".cobox").fadeIn(t.options.fadeSpeed);var v=new Image;v.onload=function(){function e(){b.width(a).show(),i.find(".cobox-loading").hide(),i.find(".cobox-image").attr("src",n),i.find(".cobox-image").fadeIn(),i.find(".cobox-nav").show(),0===o?h.hide():h.show(),o==r-1?l.hide():l.show()}t.options.textShow&&c&&0===i.find(".cobox-title").length&&u.append('<div class="cobox-title">'+c+"</div>");var a=v.width,x=v.height,b=i.find(".cobox-title"),g=b.height(),m=d-t.options.outerBorder-t.options.minLeft,w=f-g-t.options.outerBorder-t.options.minTop;a>m&&(x=parseInt(m*(x/a),10),a=m),x>w&&(a=parseInt(w*(a/x),10),x=w);var I=x+g+t.options.outerBorder;u.animate({top:t.getTop(I)},s),p.height()==x&&p.width()==a?e():p.animate({height:x},s,function(){p.animate({width:a},s,function(){e()})})},v.src=n},nav:function(o){var n=this,e=i.find(".cobox-outer");e.append(n.options.tpl.nav);var a=i.find(".cobox-nav");a.on("click",function(i){"cobox-nav cobox-prev"==t(i.target).attr("class")?(o--,n.changeImage(o)):(o++,n.changeImage(o))})},changeImage:function(o){i.find(".cobox-image").hide(),i.find(".cobox-nav").hide(),i.find(".cobox-title").remove(),i.find(".cobox-loading").show(),this.loadImage(o)},cancel:function(){var o=this,n=i.find(".cobox-main"),e=i.find(".cobox-layer");n.on("click",function(i){return"cobox-main"===t(i.target).attr("class")&&o.close(),!1}),e.on("click",function(i){return"cobox-layer"===t(i.target).attr("class")&&o.close(),!1})},close:function(){var o=i.find(".cobox");o.fadeOut(this.options.fadeSpeed,function(){o.remove()})},getTop:function(o){var i=(a.height()-o)/2+t(document).scrollTop();return i>0?i:0}},o}();t(function(){{var o=new c;new r(o)}})}(window,jQuery);
//# sourceMappingURL=../js/cobox.min.js.map